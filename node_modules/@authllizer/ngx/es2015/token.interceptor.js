import { Injectable, Injector } from '@angular/core';
import { Authllizer } from '@authllizer/core';
export class TokenInterceptor {
    constructor(injector) {
        this.injector = injector;
    }
    get _auth() {
        return this.injector.get(Authllizer);
    }
    intercept(request, next) {
        let { url, headers } = request;
        if (!headers.has('Authorization') && this._auth.toIntercept(url)) {
            let header = this._auth.getToken().toHeader();
            request = request.clone({ setHeaders: { 'Authorization': header } });
        }
        return next.handle(request);
    }
}
TokenInterceptor.decorators = [
    { type: Injectable },
];
/** @nocollapse */
TokenInterceptor.ctorParameters = () => [
    { type: Injector, },
];
//# sourceMappingURL=token.interceptor.js.map