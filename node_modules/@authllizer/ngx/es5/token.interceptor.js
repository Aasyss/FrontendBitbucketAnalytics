"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = require("@angular/core");
var core_2 = require("@authllizer/core");
var TokenInterceptor = /** @class */ (function () {
    function TokenInterceptor(injector) {
        this.injector = injector;
    }
    Object.defineProperty(TokenInterceptor.prototype, "_auth", {
        get: function () {
            return this.injector.get(core_2.Authllizer);
        },
        enumerable: true,
        configurable: true
    });
    TokenInterceptor.prototype.intercept = function (request, next) {
        var url = request.url, headers = request.headers;
        if (!headers.has('Authorization') && this._auth.toIntercept(url)) {
            var header = this._auth.getToken().toHeader();
            request = request.clone({ setHeaders: { 'Authorization': header } });
        }
        return next.handle(request);
    };
    TokenInterceptor.decorators = [
        { type: core_1.Injectable },
    ];
    /** @nocollapse */
    TokenInterceptor.ctorParameters = function () { return [
        { type: core_1.Injector, },
    ]; };
    return TokenInterceptor;
}());
exports.TokenInterceptor = TokenInterceptor;
//# sourceMappingURL=token.interceptor.js.map