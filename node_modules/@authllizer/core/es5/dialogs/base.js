"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var parse_query_1 = require("../utils/parse-query");
var extend_1 = require("../utils/extend");
var extend_class_1 = require("../utils/extend-class");
var BaseDialog = /** @class */ (function () {
    function BaseDialog(name, redirectUri, displayOptions) {
        this.name = this.name || name;
        this.redirectUri = this.redirectUri || redirectUri;
        this.setDisplayOptions(displayOptions);
    }
    BaseDialog.parseUrl = function (url) {
        var location = document.createElement('a');
        location.href = url;
        if (location.search || location.hash) {
            var query = parse_query_1.default(location.search.substring(1).replace(/\/$/, ''));
            var hash = parse_query_1.default(location.hash.substring(1).replace(/[\/$]/, ''));
            return extend_1.default({}, query, hash);
        }
        else {
            throw new Error('OAuth redirect has occurred but no query or hash parameters were found. ' +
                'They were either not set during the redirect, or were removed—typically by a ' +
                'routing library—before Authllizer could read it.');
        }
    };
    BaseDialog.prototype.setDisplayOptions = function () {
        var displayOptions = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            displayOptions[_i] = arguments[_i];
        }
        this.displayOptions = extend_1.default.apply(void 0, [this.displayOptions].concat(displayOptions));
    };
    BaseDialog.extend = extend_class_1.default;
    return BaseDialog;
}());
exports.BaseDialog = BaseDialog;
//# sourceMappingURL=base.js.map